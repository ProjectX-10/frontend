{"version":3,"sources":["../../src/pages/add-secret/add-secret.module.ts","../../src/pages/add-secret/add-secret.ts"],"names":[],"mappings":"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","file":"2.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddSecret } from './add-secret';\n\n@NgModule({\n  declarations: [\n    AddSecret,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddSecret),\n  ],\n  exports: [\n    AddSecret\n  ]\n})\nexport class AddSecretModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-secret/add-secret.module.ts","import { OnInit, Component } from '@angular/core';\nimport { AlertController, IonicPage, NavController, NavParams, LoadingController, Loading } from 'ionic-angular';\n\nimport {FormGroup, FormBuilder, FormControl, Validators} from \"@angular/forms\";\nimport { Storage } from '@ionic/storage';\nimport { DefaultApi } from '../../providers/api/DefaultApi';\nimport * as models  from '../../providers/model/models';\nimport * as CryptoJS from 'crypto-js/crypto-js';\n/**\n * Generated class for the AddSecret page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-add-secret',\n  templateUrl: 'add-secret.html',\n})\nexport class AddSecret implements OnInit {\n\n  loading: Loading;\n  myForm: FormGroup;\n  SECERET_KEY: string = '';\n  secret: {userId: string, domain: string, username: string, password: string, encryptedPassword: string, note: string, secretKey: string} = \n          {userId: '', domain: '', username: '', password: '', encryptedPassword: '', note: '', secretKey: ''};\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private alertCtrl: AlertController,\n  \tpublic formBuilder: FormBuilder, private api: DefaultApi, private loadingCtrl: LoadingController, private storage: Storage\n    ) {\n\n  }\n\n  ngOnInit(): any {\n\n    this.storage.get('user').then((val) => {\n      this.secret.userId = val.item.id;\n      this.storage.get('secretKey').then((value) => {\n        this.SECERET_KEY = value;\n        //this.inputTestData();\n      });\n    });\n    \n    this.myForm = this.formBuilder.group({\n      'domain': ['', [Validators.required, Validators.minLength(3), this.domainValidator.bind(this)]],\n      'username': ['', [Validators.required, this.usernameValidator.bind(this)]],\n      'password': ['', [Validators.required, this.passwordValidator.bind(this)]],\n      'encryptedPassword': ['', [Validators.required, this.passwordValidator.bind(this)]],\n      'note': ['', [Validators.required, this.noteValidator.bind(this)]]\n    });\n    \n  }\n\n  onSubmit() {\n    this.showLoading();\n    var request: models.InsertSecretRequest = {} as models.InsertSecretRequest;\n    request.userId = this.secret.userId;\n    request.domain = this.secret.domain;\n    request.username = this.secret.username;\n    request.password = this.secret.encryptedPassword;    \n    request.note = this.secret.note;\n\n    this.api.secretsPost(request).subscribe(response => {        \n        this.navCtrl.push('HomePage');\n      },\n        error => {\n          this.showError(error);\n        \n      });\n  }\n\n  inputTestData() {\n    debugger;\n    var request: models.InsertSecretRequest = {} as models.InsertSecretRequest;\n    for (var i = 0; i < 30; i++) {\n      request.userId = this.secret.userId;\n      request.domain = 'domain' + i;\n      request.username = 'username' + i;\n      var ciphertext = CryptoJS.AES.encrypt('password' + i, this.SECERET_KEY);\n      request.password = ciphertext.toString();   \n      request.note = 'note' + i;\n\n      this.api.secretsPost(request).subscribe(response => {        \n          //this.navCtrl.push('HomePage');\n          console.log(response);\n        },\n          error => {\n            this.showError(error);\n          \n        });\n    }\n  }\n\n  isValid(field: string) {\n    //let formField = this.myForm.find(field);\n    //return formField.valid || formField.pristine;\n    return true;\n  }\n\n  domainValidator(control: FormControl): {[s: string]: boolean} {\n    if (control.value !== '') {\n      return {invalidDomain: true};\n    }\n  }\n\n  usernameValidator(control: FormControl): {[s: string]: boolean} {\n    if (control.value !== '') {\n      return {invalidUsername: true};\n    }\n  }\n\n  passwordValidator(control: FormControl): {[s: string]: boolean} {\n    if (control.value !== '') {      \n        return {invalidPassword: true};      \n    }\n  }\n\n  noteValidator(control: FormControl): {[s: string]: boolean} {\n        return {invalidNote: true};\n  }\n\n  onInputTime(password: string){\n  \tthis.setPasswordEncrypted(password);\n    console.log(this.getPasswordEcrypted(this.secret.encryptedPassword));\n  }\n\n  getPasswordEcrypted(pwd: string): string {\n    // Decrypt \n    var bytes = CryptoJS.AES.decrypt(pwd.toString(), this.SECERET_KEY);\n    var plaintext = bytes.toString(CryptoJS.enc.Utf8);\n    return plaintext;\n  }\n\n  setPasswordEncrypted(pwd: string): void {\n    // Encrypt \n    var ciphertext = CryptoJS.AES.encrypt(pwd, this.SECERET_KEY);\n    this.secret.encryptedPassword = ciphertext.toString();\n  }\n\n  showLoading() {\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...',\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n\n  showError(text) {\n    this.loading.dismiss();\n    \n    var object = JSON.parse(text._body);\n    console.log(object);\n \n    let alert = this.alertCtrl.create({\n      title: 'Fail',\n      subTitle: object.errorMessage,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-secret/add-secret.ts"],"sourceRoot":""}